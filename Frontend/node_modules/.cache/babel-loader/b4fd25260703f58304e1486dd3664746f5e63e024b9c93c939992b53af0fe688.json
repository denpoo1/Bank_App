{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/\\u0418\\u043B\\u044C\\u044F/Desktop/Bank_App/Frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/\\u0418\\u043B\\u044C\\u044F/Desktop/Bank_App/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/\\u0418\\u043B\\u044C\\u044F/Desktop/Bank_App/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import styles from'./RightSideLogin.module.css';import axios from'axios';import Cookies from'js-cookie';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RightSideLogin=function RightSideLogin(){var navigate=useNavigate();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isFormValid=_useState8[0],setIsFormValid=_useState8[1];useEffect(function(){// Check if both username and password are filled to enable the button\nsetIsFormValid(username.trim()!==''&&password.trim()!=='');},[username,password]);var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,token;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post('http://localhost:8080/auth/signin',{username:username,password:password});case 3:response=_context.sent;token=response.data.token;console.log('Токен:',token);// Save the token in cookies for 1 day\nCookies.set('token',token,{expires:1});Cookies.set('username',username,{expires:1});setError(null);// Redirect to the main page\nnavigate('/bank-page');_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);if(_context.t0.response&&_context.t0.response.status===400){setError(\"Username is wrong\");}else if(_context.t0.response&&_context.t0.response.status===403){setError(\"Password is wrong\");}else{setError(_context.t0);}case 15:case\"end\":return _context.stop();}},_callee,null,[[0,12]]);}));return function handleLogin(){return _ref.apply(this,arguments);};}();var handleSignUp=function handleSignUp(){// Redirect to the signup page\nnavigate('/sign-up');};return/*#__PURE__*/_jsx(\"div\",{className:styles.rightSide,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.rightSideLoginWrapper,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:styles.title,children:\"Sign in with password\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Username\",type:\"text\",value:username,onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Password\",type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{className:\"\".concat(styles.formButton,\" \").concat(isFormValid?styles.formButtonActive:''),onClick:handleLogin,disabled:!isFormValid,children:\"Log in\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:styles.errorMessage,children:error})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.footerWrap,children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Don`t have an account?\",/*#__PURE__*/_jsx(\"button\",{className:styles.btnSignUp,onClick:handleSignUp,children:\"Sign up\"})]})})]})});};export default RightSideLogin;","map":{"version":3,"names":["React","useState","useEffect","styles","axios","Cookies","useNavigate","jsx","_jsx","jsxs","_jsxs","RightSideLogin","navigate","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","_useState5","_useState6","error","setError","_useState7","_useState8","isFormValid","setIsFormValid","trim","handleLogin","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","token","wrap","_callee$","_context","prev","next","post","sent","data","console","log","set","expires","t0","status","stop","apply","arguments","handleSignUp","className","rightSide","children","rightSideLoginWrapper","title","placeholder","type","value","onChange","e","target","concat","formButton","formButtonActive","onClick","disabled","errorMessage","footerWrap","btnSignUp"],"sources":["C:/Users/Илья/Desktop/Bank_App/Frontend/src/Login/RightSideLogin/RightSideLogin.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport styles from './RightSideLogin.module.css';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst RightSideLogin = () => {\r\n  const navigate = useNavigate();\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState(null);\r\n  const [isFormValid, setIsFormValid] = useState(false);\r\n\r\n\r\n  useEffect(() => {\r\n    // Check if both username and password are filled to enable the button\r\n    setIsFormValid(username.trim() !== '' && password.trim() !== '');\r\n  }, [username, password]);\r\n\r\n  const handleLogin = async () => {\r\n\r\n    try {\r\n      const response = await axios.post('http://localhost:8080/auth/signin', {\r\n        username,\r\n        password,\r\n      });\r\n\r\n      const token = response.data.token;\r\n      console.log('Токен:', token);\r\n\r\n      // Save the token in cookies for 1 day\r\n      Cookies.set('token', token, { expires: 1 });\r\n      Cookies.set('username', username, { expires: 1 });\r\n      \r\n\r\n      setError(null);\r\n\r\n      // Redirect to the main page\r\n      navigate('/bank-page');\r\n    } catch (error) {\r\n      if (error.response && error.response.status === 400) {\r\n        setError(\"Username is wrong\");\r\n      }else if(error.response && error.response.status === 403){\r\n        setError(\"Password is wrong\");\r\n      } else {\r\n        setError(error);\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n  const handleSignUp = () => {\r\n    // Redirect to the signup page\r\n    navigate('/sign-up');\r\n  };\r\n  return (\r\n    <div className={styles.rightSide}>\r\n      <div className={styles.rightSideLoginWrapper}>\r\n        <div>\r\n        <h1 className={styles.title}>Sign in with password</h1>\r\n        <div>\r\n          <input placeholder='Username' type=\"text\" value={username} onChange={(e) => setUsername(e.target.value)} />\r\n          <input placeholder='Password' type=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} />\r\n        </div>\r\n        <button\r\n          className={`${styles.formButton} ${isFormValid ? styles.formButtonActive : ''}`}\r\n          onClick={handleLogin}\r\n          disabled={!isFormValid}\r\n        >\r\n          Log in\r\n        </button>        \r\n        \r\n        {error && <p className={styles.errorMessage}>{error}</p>}\r\n      </div>\r\n      <div className={styles.footerWrap}>\r\n      <span>Don`t have an account?<button className={styles.btnSignUp} onClick={handleSignUp}>Sign up</button></span>\r\n      \r\n      </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RightSideLogin;\r\n"],"mappings":"mcAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,MAAM,KAAM,6BAA6B,CAChD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,OAAO,KAAM,WAAW,CAC/B,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE/C,GAAM,CAAAC,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAA,CAAS,CAC3B,GAAM,CAAAC,QAAQ,CAAGN,WAAW,CAAC,CAAC,CAC9B,IAAAO,SAAA,CAAgCZ,QAAQ,CAAC,EAAE,CAAC,CAAAa,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAArCG,QAAQ,CAAAF,UAAA,IAAEG,WAAW,CAAAH,UAAA,IAC5B,IAAAI,UAAA,CAAgCjB,QAAQ,CAAC,EAAE,CAAC,CAAAkB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAArCE,QAAQ,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAC5B,IAAAG,UAAA,CAA0BrB,QAAQ,CAAC,IAAI,CAAC,CAAAsB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAjCE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IACtB,IAAAG,UAAA,CAAsCzB,QAAQ,CAAC,KAAK,CAAC,CAAA0B,UAAA,CAAAZ,cAAA,CAAAW,UAAA,IAA9CE,WAAW,CAAAD,UAAA,IAAEE,cAAc,CAAAF,UAAA,IAGlCzB,SAAS,CAAC,UAAM,CACd;AACA2B,cAAc,CAACb,QAAQ,CAACc,IAAI,CAAC,CAAC,GAAK,EAAE,EAAIV,QAAQ,CAACU,IAAI,CAAC,CAAC,GAAK,EAAE,CAAC,CAClE,CAAC,CAAE,CAACd,QAAQ,CAAEI,QAAQ,CAAC,CAAC,CAExB,GAAM,CAAAW,WAAW,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,QAAA,CAAAC,KAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAGO,CAAAvC,KAAK,CAACwC,IAAI,CAAC,mCAAmC,CAAE,CACrE5B,QAAQ,CAARA,QAAQ,CACRI,QAAQ,CAARA,QACF,CAAC,CAAC,QAHIiB,QAAQ,CAAAI,QAAA,CAAAI,IAAA,CAKRP,KAAK,CAAGD,QAAQ,CAACS,IAAI,CAACR,KAAK,CACjCS,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAEV,KAAK,CAAC,CAE5B;AACAjC,OAAO,CAAC4C,GAAG,CAAC,OAAO,CAAEX,KAAK,CAAE,CAAEY,OAAO,CAAE,CAAE,CAAC,CAAC,CAC3C7C,OAAO,CAAC4C,GAAG,CAAC,UAAU,CAAEjC,QAAQ,CAAE,CAAEkC,OAAO,CAAE,CAAE,CAAC,CAAC,CAGjDzB,QAAQ,CAAC,IAAI,CAAC,CAEd;AACAb,QAAQ,CAAC,YAAY,CAAC,CAAC6B,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAU,EAAA,CAAAV,QAAA,aAEvB,GAAIA,QAAA,CAAAU,EAAA,CAAMd,QAAQ,EAAII,QAAA,CAAAU,EAAA,CAAMd,QAAQ,CAACe,MAAM,GAAK,GAAG,CAAE,CACnD3B,QAAQ,CAAC,mBAAmB,CAAC,CAC/B,CAAC,IAAK,IAAGgB,QAAA,CAAAU,EAAA,CAAMd,QAAQ,EAAII,QAAA,CAAAU,EAAA,CAAMd,QAAQ,CAACe,MAAM,GAAK,GAAG,CAAC,CACvD3B,QAAQ,CAAC,mBAAmB,CAAC,CAC/B,CAAC,IAAM,CACLA,QAAQ,CAAAgB,QAAA,CAAAU,EAAM,CAAC,CACjB,CAAC,yBAAAV,QAAA,CAAAY,IAAA,MAAAjB,OAAA,iBAEJ,kBA7BK,CAAAL,WAAWA,CAAA,SAAAC,IAAA,CAAAsB,KAAA,MAAAC,SAAA,OA6BhB,CAGD,GAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CACzB;AACA5C,QAAQ,CAAC,UAAU,CAAC,CACtB,CAAC,CACD,mBACEJ,IAAA,QAAKiD,SAAS,CAAEtD,MAAM,CAACuD,SAAU,CAAAC,QAAA,cAC/BjD,KAAA,QAAK+C,SAAS,CAAEtD,MAAM,CAACyD,qBAAsB,CAAAD,QAAA,eAC3CjD,KAAA,QAAAiD,QAAA,eACAnD,IAAA,OAAIiD,SAAS,CAAEtD,MAAM,CAAC0D,KAAM,CAAAF,QAAA,CAAC,uBAAqB,CAAI,CAAC,cACvDjD,KAAA,QAAAiD,QAAA,eACEnD,IAAA,UAAOsD,WAAW,CAAC,UAAU,CAACC,IAAI,CAAC,MAAM,CAACC,KAAK,CAAEhD,QAAS,CAACiD,QAAQ,CAAE,SAAAA,SAACC,CAAC,QAAK,CAAAjD,WAAW,CAACiD,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,EAAC,CAAE,CAAC,cAC3GxD,IAAA,UAAOsD,WAAW,CAAC,UAAU,CAACC,IAAI,CAAC,UAAU,CAACC,KAAK,CAAE5C,QAAS,CAAC6C,QAAQ,CAAE,SAAAA,SAACC,CAAC,QAAK,CAAA7C,WAAW,CAAC6C,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,EAAC,CAAE,CAAC,EAC5G,CAAC,cACNxD,IAAA,WACEiD,SAAS,IAAAW,MAAA,CAAKjE,MAAM,CAACkE,UAAU,MAAAD,MAAA,CAAIxC,WAAW,CAAGzB,MAAM,CAACmE,gBAAgB,CAAG,EAAE,CAAG,CAChFC,OAAO,CAAExC,WAAY,CACrByC,QAAQ,CAAE,CAAC5C,WAAY,CAAA+B,QAAA,CACxB,QAED,CAAQ,CAAC,CAERnC,KAAK,eAAIhB,IAAA,MAAGiD,SAAS,CAAEtD,MAAM,CAACsE,YAAa,CAAAd,QAAA,CAAEnC,KAAK,CAAI,CAAC,EACrD,CAAC,cACNhB,IAAA,QAAKiD,SAAS,CAAEtD,MAAM,CAACuE,UAAW,CAAAf,QAAA,cAClCjD,KAAA,SAAAiD,QAAA,EAAM,wBAAsB,cAAAnD,IAAA,WAAQiD,SAAS,CAAEtD,MAAM,CAACwE,SAAU,CAACJ,OAAO,CAAEf,YAAa,CAAAG,QAAA,CAAC,SAAO,CAAQ,CAAC,EAAM,CAAC,CAE1G,CAAC,EACD,CAAC,CACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAhD,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}