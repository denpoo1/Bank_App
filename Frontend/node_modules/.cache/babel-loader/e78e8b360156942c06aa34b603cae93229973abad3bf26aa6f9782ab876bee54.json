{"ast":null,"code":"import _slicedToArray from\"C:/Users/\\u0418\\u043B\\u044C\\u044F/Desktop/Bank_App/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import styles from'./Header.module.css';import axios from\"axios\";import Cookies from\"js-cookie\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Header=function Header(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isMenuOpen=_useState2[0],setIsMenuOpen=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),userId=_useState4[0],setUserId=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),username=_useState6[0],setUsername=_useState6[1];// Добавили состояние для хранения юзернейма\nvar _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),userData=_useState8[0],setUserData=_useState8[1];// Добавили состояние для хранения данных пользователя\nuseEffect(function(){// Получаем токен из куки\nvar tokenFromCookie=Cookies.get(\"token\");if(tokenFromCookie){// Выполняем GET-запрос для получения данных пользователя\naxios.get(\"http://localhost:8080/customers\",{headers:{Authorization:\"Bearer \".concat(tokenFromCookie)}}).then(function(response){// Получаем массив аккаунтов\nvar accounts=response.data;// Получаем сохраненный юзернейм из куки\nvar savedUsername=Cookies.get(\"username\");// Ищем аккаунт с совпадающим юзернеймом\nvar matchedAccount=accounts.find(function(account){return account.username===savedUsername;});if(matchedAccount){// Если нашли аккаунт с совпадающим юзернеймом, сохраняем айди юзера и обновляем юзернейм\nsetUserId(matchedAccount.id);setUsername(savedUsername);// Обновляем состояние с юзернеймом\n}}).catch(function(error){console.error(\"Error fetching user data:\",error);});}},[]);var toggleMenu=function toggleMenu(){setIsMenuOpen(!isMenuOpen);};useEffect(function(){// Получаем токен из куки\nvar tokenFromCookie=Cookies.get(\"token\");if(tokenFromCookie&&userId){// Выполняем GET-запрос для получения данных пользователя по его идентификатору\naxios.get(\"http://localhost:8080/customers/\".concat(userId),{headers:{Authorization:\"Bearer \".concat(tokenFromCookie)}}).then(function(response){// Устанавливаем данные пользователя в состояние\nconsole.log(response.data);setUserData(response.data);}).catch(function(error){console.error(\"Error fetching user data:\",error);});}},[userId]);// Эффект срабатывает при изменении userId\nreturn/*#__PURE__*/_jsxs(\"div\",{className:styles.header,children:[/*#__PURE__*/_jsx(\"h1\",{className:styles.headerTitle,children:\"Wallet\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.headerWrapper,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.headerSearchWrapper,children:[/*#__PURE__*/_jsx(\"button\",{className:styles.search}),/*#__PURE__*/_jsx(\"button\",{className:styles.notification})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(styles.profileButtonWrapper,\" \").concat(isMenuOpen?styles.activeDropdown:\"\"),children:[/*#__PURE__*/_jsxs(\"button\",{className:styles.profileButton,onClick:toggleMenu,children:[/*#__PURE__*/_jsx(\"span\",{children:username}),\" \",/*#__PURE__*/_jsx(\"span\",{children:isMenuOpen?\"▲\":\"▼\"})]}),isMenuOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(styles.dropdown),children:[/*#__PURE__*/_jsx(\"div\",{className:styles.option,children:\"Denis\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.option,children:\"Polnyi\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.option,children:\"Lox\"})]})]})]})]});};export default Header;","map":{"version":3,"names":["React","useState","useEffect","styles","axios","Cookies","jsx","_jsx","jsxs","_jsxs","Header","_useState","_useState2","_slicedToArray","isMenuOpen","setIsMenuOpen","_useState3","_useState4","userId","setUserId","_useState5","_useState6","username","setUsername","_useState7","_useState8","userData","setUserData","tokenFromCookie","get","headers","Authorization","concat","then","response","accounts","data","savedUsername","matchedAccount","find","account","id","catch","error","console","toggleMenu","log","className","header","children","headerTitle","headerWrapper","headerSearchWrapper","search","notification","profileButtonWrapper","activeDropdown","profileButton","onClick","dropdown","option"],"sources":["C:/Users/Илья/Desktop/Bank_App/Frontend/src/Header/Header.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport styles from './Header.module.css';\r\nimport axios from \"axios\";\r\nimport Cookies from \"js-cookie\";\r\n\r\nconst Header = () => {\r\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\r\n    const [userId, setUserId] = useState(null);\r\n  const [username, setUsername] = useState(\"\"); // Добавили состояние для хранения юзернейма\r\n  const [userData, setUserData] = useState(null); // Добавили состояние для хранения данных пользователя\r\n\r\n  useEffect(() => {\r\n    // Получаем токен из куки\r\n    const tokenFromCookie = Cookies.get(\"token\");\r\n\r\n    if (tokenFromCookie) {\r\n      // Выполняем GET-запрос для получения данных пользователя\r\n      axios\r\n        .get(\"http://localhost:8080/customers\", {\r\n          headers: {\r\n            Authorization: `Bearer ${tokenFromCookie}`,\r\n          },\r\n        })\r\n        .then((response) => {\r\n          // Получаем массив аккаунтов\r\n          const accounts = response.data;\r\n\r\n          // Получаем сохраненный юзернейм из куки\r\n          const savedUsername = Cookies.get(\"username\");\r\n\r\n          // Ищем аккаунт с совпадающим юзернеймом\r\n          const matchedAccount = accounts.find(\r\n            (account) => account.username === savedUsername\r\n          );\r\n\r\n          if (matchedAccount) {\r\n            // Если нашли аккаунт с совпадающим юзернеймом, сохраняем айди юзера и обновляем юзернейм\r\n            setUserId(matchedAccount.id);\r\n            setUsername(savedUsername); // Обновляем состояние с юзернеймом\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Error fetching user data:\", error);\r\n        });\r\n    }\r\n  }, []);\r\n\r\n  const toggleMenu = () => {\r\n    setIsMenuOpen(!isMenuOpen);\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Получаем токен из куки\r\n    const tokenFromCookie = Cookies.get(\"token\");\r\n\r\n    if (tokenFromCookie && userId) {\r\n      // Выполняем GET-запрос для получения данных пользователя по его идентификатору\r\n      axios\r\n        .get(`http://localhost:8080/customers/${userId}`, {\r\n          headers: {\r\n            Authorization: `Bearer ${tokenFromCookie}`,\r\n          },\r\n        })\r\n        .then((response) => {\r\n          // Устанавливаем данные пользователя в состояние\r\n          console.log(response.data)\r\n          setUserData(response.data);\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Error fetching user data:\", error);\r\n        });\r\n    }\r\n  }, [userId]); // Эффект срабатывает при изменении userId\r\n  \r\n  return (\r\n    <div className={styles.header}>\r\n      <h1 className={styles.headerTitle}>Wallet</h1>\r\n      <div className={styles.headerWrapper}>\r\n        <div className={styles.headerSearchWrapper}>\r\n          <button className={styles.search}></button>\r\n          <button className={styles.notification}></button>\r\n        </div>\r\n        <div\r\n          className={`${styles.profileButtonWrapper} ${\r\n            isMenuOpen ? styles.activeDropdown : \"\"\r\n          }`}\r\n        >\r\n          <button className={styles.profileButton} onClick={toggleMenu}>\r\n            <span>{username}</span> {/* Используем состояние с юзернеймом */}\r\n            <span>{isMenuOpen ? \"▲\" : \"▼\"}</span>\r\n          </button>\r\n          {isMenuOpen && (\r\n            <div className={`${styles.dropdown}`}>\r\n              <div className={styles.option}>Denis</div>\r\n              <div className={styles.option}>Polnyi</div>\r\n              <div className={styles.option}>Lox</div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}